<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alexander Long - Portfolio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="scroll-progress">
        <div id="scroll-progress-bar"></div>
    </div>

    <div id="loading-screen">
        <div class="loading-icon"></div>
    </div>

    <header>
        <div class="logo">Alexander Long</div>
        <nav>
            <button id="theme-toggle" aria-label="Toggle dark/light mode">
                <span class="toggle-slider"></span>
            </button>
            <ul>
                <li><a href="#work" class="active">Work</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="project-title">
            <h1 id="project-heading">James H. Miller Jr.<br>Data Book Design</h1>
        </section>

        <section class="project-info">
            <div class="info-section">
                <h3>Student Project</h3>
                <p>Book Design // 2025 // Designer // In Collaboration with Ella Merkel</p>
            </div>
            <div class="info-section">
                <h3>Awards</h3>
                <p>AAF Addy Gold Award // AAF Addy Best-In-Show</p>
            </div>
        </section>

        <div id="gallery-container">
            <section class="content-area"></section>
        </div>

        <section class="intro-section">
            <h3 class="intro-label">INTRO</h3>
            <h2 class="intro-title">An Environmental Critique of Power Plants</h2>
            <div class="intro-content">
                <p>TGR Learning Labs are a signature part of Tiger Woods' TGR Foundation, supported by direct investment and involvement from Tiger himself. Launched in 2006 with a focus on closing the opportunity gap for students from under-resourced communities, each individual Learning Lab empowers young people to create a future all their own.</p>
                <p>With a flagship location in Anaheim and plans for more in the works, the team asked us to help them build a brand that could scale nationally and attract more students than ever before.</p>
            </div>
        </section>

        <div id="gallery-container-rest">
            <section class="content-area"></section>
            <section class="content-area"></section>
            <section class="content-area"></section>
        </div>

        <section class="image-text-section">
            <div class="image-text-image">
                <section class="content-area"></section>
            </div>
            <div class="image-text-content">
                <p>Add your text content here. This section appears to the right of the 4th image and uses the same styling as the intro section paragraphs.</p>
            </div>
        </section>

        <div id="gallery-container-end">
            <section class="content-area"></section>
            <section class="content-area"></section>
        </div>

        <section class="project-credit">
            <h2>Project Credit</h2>
            <div class="credit-list">
                <p>Alexander Long — Layout, Illustration, Photography</p>
                <p>Ella Merkel — Cover Design, Illustration, Binding</p>
            </div>
        </section>
    </main>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Loading screen animation
        (function() {
            var loadingScreen = document.getElementById('loading-screen');
            var startTime = Date.now();
            var minLoadTime = 800; // Minimum 1.5 seconds
            
            window.addEventListener('load', function() {
                var elapsed = Date.now() - startTime;
                var remaining = Math.max(0, minLoadTime - elapsed);
                
                setTimeout(function() {
                    loadingScreen.classList.add('loaded');
                }, remaining);
            });
        })();

        // Load project data from Pages CMS–editable JSON (images + title + content)
        (function loadProjectData() {
            const containerFirst = document.getElementById('gallery-container');
            const containerRest = document.getElementById('gallery-container-rest');
            const imageTextSection = document.querySelector('.image-text-section .image-text-image');
            const imageTextContent = document.querySelector('.image-text-content');
            const containerEnd = document.getElementById('gallery-container-end');
            const heading = document.getElementById('project-heading');
            const introLabel = document.querySelector('.intro-label');
            const introTitle = document.querySelector('.intro-title');
            const introContent = document.querySelector('.intro-content');
            
            fetch('data/project.json')
                .then(function(res) { return res.ok ? res.json() : Promise.reject(); })
                .then(function(data) {
                    // Update project title
                    if (data.title && heading) heading.innerHTML = data.title;
                    
                    // Update intro section
                    if (data.intro_label && introLabel) introLabel.textContent = data.intro_label;
                    if (data.intro_title && introTitle) introTitle.textContent = data.intro_title;
                    if (data.intro_content && introContent) {
                        introContent.innerHTML = '';
                        var paragraphs = data.intro_content.split('\n\n');
                        paragraphs.forEach(function(para) {
                            if (para.trim()) {
                                var p = document.createElement('p');
                                p.textContent = para.trim();
                                introContent.appendChild(p);
                            }
                        });
                    }
                    
                    // Update image-text section content
                    if (data.image_text_content && imageTextContent) {
                        imageTextContent.innerHTML = '';
                        var p = document.createElement('p');
                        p.textContent = data.image_text_content;
                        imageTextContent.appendChild(p);
                    }
                    
                    // Load images
                    if (data.sections && Array.isArray(data.sections)) {
                        // First image goes in gallery-container
                        if (containerFirst && data.sections[0]) {
                            containerFirst.innerHTML = '';
                            var el = document.createElement('section');
                            el.className = 'content-area';
                            if (data.sections[0].image && data.sections[0].image.trim()) {
                                var img = document.createElement('img');
                                img.src = data.sections[0].image.replace(/^\//, '');
                                img.alt = '';
                                img.setAttribute('loading', 'lazy');
                                el.appendChild(img);
                            }
                            containerFirst.appendChild(el);
                        }
                        // Images 2-3 go in gallery-container-rest
                        if (containerRest) {
                            containerRest.innerHTML = '';
                            data.sections.slice(1, 3).forEach(function(section) {
                                var el = document.createElement('section');
                                el.className = 'content-area';
                                if (section.image && section.image.trim()) {
                                    var img = document.createElement('img');
                                    img.src = section.image.replace(/^\//, '');
                                    img.alt = '';
                                    img.setAttribute('loading', 'lazy');
                                    el.appendChild(img);
                                }
                                containerRest.appendChild(el);
                            });
                        }
                        // 4th image goes in image-text-section
                        if (imageTextSection && data.sections[3]) {
                            imageTextSection.innerHTML = '';
                            var el = document.createElement('section');
                            el.className = 'content-area';
                            if (data.sections[3].image && data.sections[3].image.trim()) {
                                var img = document.createElement('img');
                                img.src = data.sections[3].image.replace(/^\//, '');
                                img.alt = '';
                                img.setAttribute('loading', 'lazy');
                                el.appendChild(img);
                            }
                            imageTextSection.appendChild(el);
                        }
                        // Images 5-6 go in gallery-container-end
                        if (containerEnd) {
                            containerEnd.innerHTML = '';
                            data.sections.slice(4).forEach(function(section) {
                                var el = document.createElement('section');
                                el.className = 'content-area';
                                if (section.image && section.image.trim()) {
                                    var img = document.createElement('img');
                                    img.src = section.image.replace(/^\//, '');
                                    img.alt = '';
                                    img.setAttribute('loading', 'lazy');
                                    el.appendChild(img);
                                }
                                containerEnd.appendChild(el);
                            });
                        }
                        if (typeof observeContentAreas === 'function') observeContentAreas();
                    }
                })
                .catch(function() { /* keep default HTML */ });
        })();

        // Header show/hide on scroll
        let lastScrollTop = 0;
        const header = document.querySelector('header');
        const scrollThreshold = 100; // Minimum scroll before hiding header

        window.addEventListener('scroll', function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Only apply effect after scrolling past threshold
            if (scrollTop > scrollThreshold) {
                if (scrollTop > lastScrollTop) {
                    // Scrolling down - hide header
                    header.classList.add('header-hidden');
                } else {
                    // Scrolling up - show header
                    header.classList.remove('header-hidden');
                }
            } else {
                // Near top of page - always show header
                header.classList.remove('header-hidden');
            }
            
            lastScrollTop = scrollTop;
        });

        // Scroll-triggered blur animations (run after DOM ready; re-observes if gallery was rebuilt)
        function observeContentAreas() {
            var observerOptions = { threshold: 0.15, rootMargin: '0px 0px -50px 0px' };
            var observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, observerOptions);
            document.querySelectorAll('.content-area').forEach(function(area) {
                observer.observe(area);
            });
        }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', observeContentAreas);
        } else {
            observeContentAreas();
        }

        // First image bleed-to-edge scroll effect
        (function() {
            var firstGallery = document.getElementById('gallery-container');
            var introSection = document.querySelector('.intro-section');
            
            if (!firstGallery || !introSection) return;
            
            function handleScroll() {
                var introTop = introSection.getBoundingClientRect().top;
                var windowHeight = window.innerHeight;
                
                // Start transition when intro section is about to come into view
                if (introTop < windowHeight * 1.2) {
                    firstGallery.classList.add('scrolled');
                } else {
                    firstGallery.classList.remove('scrolled');
                }
            }
            
            window.addEventListener('scroll', handleScroll);
            handleScroll(); // Check initial state
        })();

        // Scroll progress indicator
        (function() {
            var progressBar = document.getElementById('scroll-progress-bar');
            
            function updateProgressBar() {
                var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                var docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                var scrollPercent = (scrollTop / docHeight) * 100;
                
                if (progressBar) {
                    progressBar.style.width = scrollPercent + '%';
                }
            }
            
            window.addEventListener('scroll', updateProgressBar);
            window.addEventListener('resize', updateProgressBar);
            updateProgressBar(); // Initial state
        })();

        // Theme toggle functionality
        (function() {
            var themeToggle = document.getElementById('theme-toggle');
            var html = document.documentElement;
            
            // Check for saved theme preference or default to dark
            var currentTheme = localStorage.getItem('theme') || 'dark';
            
            // Apply saved theme on load
            if (currentTheme === 'light') {
                html.setAttribute('data-theme', 'light');
            } else {
                html.removeAttribute('data-theme');
            }
            
            // Toggle theme on button click
            themeToggle.addEventListener('click', function() {
                var theme = html.getAttribute('data-theme');
                
                if (theme === 'light') {
                    html.removeAttribute('data-theme');
                    localStorage.setItem('theme', 'dark');
                } else {
                    html.setAttribute('data-theme', 'light');
                    localStorage.setItem('theme', 'light');
                }
            });
        })();
    </script>
</body>
</html>