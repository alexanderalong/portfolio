<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alexander Long - Portfolio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="loading-screen">
        <div class="loading-icon"></div>
    </div>

    <header>
        <div class="logo">Alexander Long</div>
        <nav>
            <ul>
                <li><a href="#work" class="active">Work</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="project-title">
            <h1 id="project-heading">James H. Miller Jr.<br>Data Book Design</h1>
        </section>

        <section class="project-info">
            <div class="info-section">
                <h3>Student Project</h3>
                <p>Book Design // 2025 // Designer // In Collaboration with Ella Merkel</p>
            </div>
            <div class="info-section">
                <h3>Awards</h3>
                <p>AAF Addy Gold Award // AAF Addy Best-In-Show</p>
            </div>
        </section>

        <div id="gallery-container">
            <section class="content-area"></section>
            <section class="content-area"></section>
            <section class="content-area"></section>
            <section class="content-area"></section>
            <section class="content-area"></section>
            <section class="content-area"></section>
        </div>

        <section class="project-credit">
            <h2>Project Credit</h2>
            <div class="credit-list">
                <p>Alexander Long — Layout, Illustration, Photography</p>
                <p>Ella Merkel — Cover Design, Illustration, Binding</p>
            </div>
        </section>
    </main>

    <button id="theme-toggle" aria-label="Toggle dark/light mode">
        <span class="theme-icon">☀</span>
    </button>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Loading screen animation
        (function() {
            var loadingScreen = document.getElementById('loading-screen');
            var startTime = Date.now();
            var minLoadTime = 800; // Minimum 1.5 seconds
            
            window.addEventListener('load', function() {
                var elapsed = Date.now() - startTime;
                var remaining = Math.max(0, minLoadTime - elapsed);
                
                setTimeout(function() {
                    loadingScreen.classList.add('loaded');
                }, remaining);
            });
        })();

        // Load project data from Pages CMS–editable JSON (images + title)
        (function loadProjectData() {
            const container = document.getElementById('gallery-container');
            const heading = document.getElementById('project-heading');
            fetch('data/project.json')
                .then(function(res) { return res.ok ? res.json() : Promise.reject(); })
                .then(function(data) {
                    if (data.title && heading) heading.innerHTML = data.title;
                    if (data.sections && Array.isArray(data.sections) && container) {
                        container.innerHTML = '';
                        data.sections.forEach(function(section) {
                            var el = document.createElement('section');
                            el.className = 'content-area';
                            if (section.image && section.image.trim()) {
                                var img = document.createElement('img');
                                img.src = section.image.replace(/^\//, '');
                                img.alt = '';
                                img.setAttribute('loading', 'lazy');
                                el.appendChild(img);
                            }
                            container.appendChild(el);
                        });
                        if (typeof observeContentAreas === 'function') observeContentAreas();
                    }
                })
                .catch(function() { /* keep default HTML */ });
        })();

        // Header show/hide on scroll
        let lastScrollTop = 0;
        const header = document.querySelector('header');
        const scrollThreshold = 100; // Minimum scroll before hiding header

        window.addEventListener('scroll', function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Only apply effect after scrolling past threshold
            if (scrollTop > scrollThreshold) {
                if (scrollTop > lastScrollTop) {
                    // Scrolling down - hide header
                    header.classList.add('header-hidden');
                } else {
                    // Scrolling up - show header
                    header.classList.remove('header-hidden');
                }
            } else {
                // Near top of page - always show header
                header.classList.remove('header-hidden');
            }
            
            lastScrollTop = scrollTop;
        });

        // Scroll-triggered blur animations (run after DOM ready; re-observes if gallery was rebuilt)
        function observeContentAreas() {
            var observerOptions = { threshold: 0.15, rootMargin: '0px 0px -50px 0px' };
            var observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, observerOptions);
            document.querySelectorAll('.content-area').forEach(function(area) {
                observer.observe(area);
            });
        }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', observeContentAreas);
        } else {
            observeContentAreas();
        }

        // Theme toggle functionality
        (function() {
            var themeToggle = document.getElementById('theme-toggle');
            var themeIcon = document.querySelector('.theme-icon');
            var html = document.documentElement;
            
            // Check for saved theme preference or default to dark
            var currentTheme = localStorage.getItem('theme') || 'dark';
            
            // Apply saved theme on load
            if (currentTheme === 'light') {
                html.setAttribute('data-theme', 'light');
                themeIcon.textContent = '☾';
            } else {
                html.removeAttribute('data-theme');
                themeIcon.textContent = '☀';
            }
            
            // Toggle theme on button click
            themeToggle.addEventListener('click', function() {
                var theme = html.getAttribute('data-theme');
                
                if (theme === 'light') {
                    html.removeAttribute('data-theme');
                    themeIcon.textContent = '☀';
                    localStorage.setItem('theme', 'dark');
                } else {
                    html.setAttribute('data-theme', 'light');
                    themeIcon.textContent = '☾';
                    localStorage.setItem('theme', 'light');
                }
            });
        })();
    </script>
</body>
</html>